<!-- movie-card.html -->
<article class="movie-card" (click)="onClick()">
  <div class="poster-wrapper">
    <img 
      [src]="movie().posterPath | tmdbImage:'w342'" 
      [alt]="movie().title" 
      class="poster" 
      loading="lazy" 
    />
    @if (showRating()) {
      <div class="rating-badge">⭐ {{ rating() }}</div>
    }
    <!-- Always visible, clickable watchlist badge -->
    <button 
      class="watchlist-badge"
      [class.active]="isInWatchlist()"
      (click)="toggleWatchlist($event)"
      [title]="isInWatchlist() ? 'Remove from Watchlist' : 'Add to Watchlist'"
    >
      {{ isInWatchlist() ? '✓' : '+' }}
    </button>
  </div>
  <div class="info">
    <h3 class="title">{{ movie().title }}</h3>
    <span class="year">{{ year() }}</span>
    @if (movie().genreIds?.length) {
      <div class="genre-tags">
        @for (genre of movie().genreIds | genreNames:3; track genre) {
          <span class="genre-tag">{{ genre }}</span>
        }
      </div>
    }
  </div>
</article>