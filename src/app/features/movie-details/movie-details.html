@if (loading()) {
  <div class="loading">Loading...</div>
} @else if (error()) {
  <div class="error">
    <p>{{ error() }}</p>
    <button (click)="goBack()">← Go Back</button>
  </div>
} @else if (movie(); as m) {
  <div class="details-page">
    <!-- Backdrop using pipe -->
    <div 
      class="backdrop" 
      [style.background-image]="'url(' + (m.posterPath | tmdbImage:'w1280') + ')'"
    ></div>

    <div class="content">
      <!-- Poster using pipe -->
      <img 
        [src]="m.posterPath | tmdbImage:'w500'" 
        [alt]="m.title" 
        class="poster" 
      />

      <div class="info">
        <h1>{{ m.title }} <span class="year">({{ year() }})</span></h1>
        
        <div class="rating">⭐ {{ rating() }}</div>
        
        <p class="overview">{{ m.synopsis }}</p>
        
        <div class="actions">
          <button
            class="btn-watchlist"
            [class.in-watchlist]="isInWatchlist()"
            (click)="toggleWatchlist()"
          >
            {{ isInWatchlist() ? '✓ In Watchlist' : '+ Add to Watchlist' }}
          </button>
          
          <button class="btn-back" (click)="goBack()">
            ← Back
          </button>
        </div>
      </div>
    </div>
  </div>
} @else {
  <div class="not-found">Movie not found</div>
}